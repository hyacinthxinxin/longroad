<ol class="breadcrumb">
  <li><%= link_to '我的所有项目', buildings_path %></li>
  <li><%= link_to @device.area.floor.building.name+'('+@device.area.floor.building.socket_address+')', building_path(@device.area.floor.building) %></li>
  <li><%= link_to @device.area.floor.name+'->'+@device.area.name, building_floor_area_path(@device.area.floor.building, @device.area.floor, @device.area) %></li>
  <li class="active"><%= @device.name%></li>
</ol>

<h2><%= label :name, @device.name+'的所有控件'%></h2>
<%= form_for([@device.area.floor.building, @device.area.floor, @device.area, @device]) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="form-group">
    <%= f.label :name, '设备名称'%>
    <%= f.text_field :name, placeholder: "设备的名字.", class:'form-control' %>
</div>

<% if need_image_choose @device.i_type %>
    <div class="form-group" id="device_image_choose">
        <%= f.label :image_name, '设备图标(如果不是场景，请随意选择一个图标)'%>
        <br>
        <%= f.collection_radio_buttons( :image_name, 
                                        Device::DefaultImages,
                                        :first,
                                        :last,
                                        item_wrapper_tag: :div
                                    ) do |b|
                                        b.label { b.radio_button+image_tag("le_icons/mode_icon/mode_#{b.value}_nor.png", 
                                                                            size: '48x48', 
                                                                            class: "device-image") }
                                        end
        %>
    </div>
<% else %>
    <%= f.hidden_field :image_name, value: f.object.image_name %>
<% end %>

<%= f.hidden_field :i_type, value: f.object.i_type %>
  <%= f.fields_for :cams do |cam_f| %>
    <%= render "cam_fields", :f => cam_f %>
  <% end %>
  <%= f.submit "保存修改", class: "btn btn-primary btn-block" %>
<% end %>